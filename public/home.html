<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .cent {
        position: absolute;
        left: 50%;
        top: 50%;
        -webkit-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
        }
    </style>
</head>
<body>
    
    <div class='cent'>
        <video id="video" width="500" height="500" controls>
            <track id='track' kind="subtitles" srclang="en" label="English" />
        </video>
    </div>
    <br>
    <br>
    <br>
    <br>
    <script src="//cdn.jsdelivr.net/npm/hls.js@0.12.2/dist/hls.min.js"></script>
    <script>
        const video = document.getElementById('video')
        const sub = document.getElementById('track')
        const videoSrc = '/assets/output.m3u8'
        const subSrc = '/vtt/subs.vtt'
        sub.src = subSrc
        if(Hls.isSupported()){
            const hls = new Hls();
            // const hls1 = new Hls();
            // hls1.loadSource(subSrc)
            // hls1.attachMedia(video)
            hls.loadSource(videoSrc)
            // sub.src = subSrc;
            // sub.addEventListener("load", function() {
            //     this.mode = "showing";
            //     video.textTracks[0].mode = "showing";
            // });
            hls.attachMedia(video)

            // hls1.on(Hls.Events.MANIfEST_PARSED,()=>{
            //     console.log('hello')
            // })
            // hls.on(Hls.Events.MANIfEST_PARSED,()=>{
            //     video.play()
            // })
        }else if(video.canPlayType('application/vnd.apple.mpegurl')){
            alert('sss')
            video.src =videoSrc;
            sub.src = subSrc;
            sub.addEventListener("load", function() {
                this.mode = "showing";
                video.textTracks[0].mode = "showing";
            });
            video.addEventListener('loadedmetadata',()=>{
                video.play();
            })
        }
    </script>
</body>
</html>